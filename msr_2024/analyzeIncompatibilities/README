analyzeIncompatibilities.py

This Python script, analyzeIncompatibilities.py, is designed to display the count of license incompatibilities by license type between licenses in Hugging Face and the GitHub repository's license utilizing the Hugging Face PreTrained Model (PTM). Below are the necessary variables that you need to set before running the script.

Necessary Globals to Set:
1. hf_license_to_gh_repo_csv
2. gh_repo_url_col
3. hf_license_col
4. gh_repo_to_gh_license_json

see example.csv for the minimal format of an inputted .csv

The CSV file should have at least two columns: one for the GitHub repository's URL and another for the corresponding license of the utilized PTM from Hugging Face.
In the case of example.csv, gh_repo_url_col=0 and hf_license_col=1.

see example.json for the format of an inputted .json

The JSON file should contain a mapping of GitHub repositories to their corresponding licenses as key-list pairs. The key should be the GitHub "{username}/{repo}" found in the URL of a GitHub repository. The paired list to the key is any applicable licenses to the GitHub repository. Licenses in this project are stored by their SPDX Identifier.

Optional Globals to Manipulate:
1. aliases
    Dictionary of Key-Value pairs
    Stores an alias to a license as a key and the SPDX Identifier as the value
2. knownMapping
    Dictionary of Key-List Pairs
    Stores licenses from the Hugging Face data as keys mapped to a list of known compatible or incompatible relationships to licenses used in the GitHub data
3. incompatibleMapping
    Dictionary of Key-List Pairs
    Stores licenses from the Hugging Face data as keys mapped to a list of incompatible relationships to licenses used in the GitHub data
4. licenseTypeMapping
    Dictionary of Key-List Pairs
    Stores license types as keys mapped to a list of licenses in the GitHub data of that license type

Note: known relationships added to 'knownMapping' should also update 'incompatibleMapping' if the relationship is incompatible, and 'licenseTypeMapping' if the GitHub license is not found in the list for its applicable license type key.

Executing the Script:
To run the script, execute the following command or equivalent in your terminal or command prompt:
python .\analyzeIncompatibilities.py

This will execute the script and display the "GH License Types vs. License Incompatibility Frequencies Relative to Total Frequency of GH License Type" chart.

Also, written to stdout is:
1. other count
    Number of relations including a license of the 'other' type or equivalent.
2. other percent
    Percent of total relations including a license of the 'other' type or equivalent.
3. unkown relations count
    Number of relations which are not present in 'knownMapping'.
4. unkown relations percent
    Percent of total relations which are not present in 'knownMapping'.
5. GH repos not found
    Any '{username}/{repo}' keys which are not found in 'gh_repo_to_gh_license_json'.
6. unkown mappings HF->GH
    List of key:set() pairs where key is the HF license  of the relation not found in 'knownMapping' mapping to the set of key:value pairs where the key is the GH license mapping to the number of occurences that relation occurs.